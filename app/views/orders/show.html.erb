<div class="container">
  <div class="row">
    <div class="col-12 mt-5">
      <h3>注文内容を確認・変更する</h3>
      <% @order.order_items.each do |item| %>
      <div class="card mt-4">
        <div class="card-body">
          <h5 class="card-title"><%= item.cosmetic.product_name %></h5>
          <h6 class="card-subtitle mb-2 text-muted"><%= item.cosmetic.company_name %></h6>
          <p class="card-text">数量 : <%= item.quantity %></p>
          <a href="#" class="card-link">変更</a>
          <a href="#" class="card-link">削除</a>
          <p class="card-text">価格 : <%= price_to_currency(item) %></p>
        </div>
      </div>
      <% end %>
    </div>
  </div>

  <div class="row mt-5">
    <div class="col-12">
      <h3>お届け先住所</h3>
      <form>
        <div class="form-group mt-2">
          <label for="">氏名</label>
          <input type="text" class="form-control" id="name" name="name">
        </div>

        <div class="form-group mt-2">
          <label for="">郵便番号 </label>
          <input type="text" class="form-control" id="phone">
        </div>

        <div class="form-group mt-2">
          <label for="">Eメール</label>
          <input type="text" class="form-control" id="email">
        </div>

        <div class="form-group mt-2">
          <label for="" class="d-block">住所</label>
          <input type="text" class="form-control mt-2" name="zipcode" maxlength="9" type="tel"
            onchange="javascript:getAddName(this.value)" placeholder="郵便番号">
          <input type="text" class="form-control mt-2" id="add_name" name="address" placeholder="住所1">
          <input type="text" class="form-control mt-2" id="adress_1" name="adress_1" placeholder="住所2">
        </div>
      </form>
    </div>
  </div>
</div>

<script>
// 住所検索（郵便番号利用）
  var getAddName = function ($addNum) {
    var _zipcloudAPI = document.body.appendChild(document.createElement("script"));
    _zipcloudAPI.src = "http://zipcloud.ibsnet.co.jp/api/search?zipcode=" + $addNum +
      "&callback=getAddNameByZipcloudAPI";
    document.body.removeChild(_zipcloudAPI);
  };
  var getAddNameByZipcloudAPI = function ($getAdd) {
    var _addFormatted = "";
    if ($getAdd.status == 200) {
      _addFormatted += $getAdd.results[0].address1; // 都道府県名
      _addFormatted += $getAdd.results[0].address2; // 市町村名
      _addFormatted += $getAdd.results[0].address3; // 町域名
    }
    document.getElementById("add_name").value = _addFormatted;
  };
</script>